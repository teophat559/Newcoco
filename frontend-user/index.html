<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang chủ - VOTEWEB</title>
  <meta name="description" content="Hệ thống bình chọn, cuộc thi, thí sinh nổi bật, tin tức mới nhất.">
  <link rel="stylesheet" href="assets/css/style.css">
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: #f7f8fa; }
    header { background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.04); padding: 0.5rem 2rem; display: flex; align-items: center; justify-content: space-between; }
    .logo { font-size: 1.7rem; font-weight: bold; color: #1abc9c; letter-spacing: 1px; display: flex; align-items: center; }
    .logo img { height: 36px; margin-right: 10px; }
    nav a { margin: 0 1rem; color: #333; text-decoration: none; font-weight: 500; }
    nav a.active, nav a:hover { color: #1abc9c; }
    .btn-main { background: #1abc9c; color: #fff; border: none; padding: 0.5rem 1.2rem; border-radius: 6px; font-weight: bold; cursor: pointer; }
    .slider { position: relative; width: 100%; max-width: 1100px; margin: 1.5rem auto 0; border-radius: 16px; overflow: hidden; box-shadow: 0 2px 12px rgba(0,0,0,0.08); }
    .slides { display: flex; transition: transform 0.6s cubic-bezier(.4,0,.2,1); }
    .slide { min-width: 100%; height: 320px; display: flex; align-items: center; justify-content: center; background-size: cover; background-position: center; color: #fff; font-size: 2rem; font-weight: bold; text-shadow: 0 2px 8px rgba(0,0,0,0.2); position: relative; }
    .slider-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.3); color: #fff; border: none; font-size: 2rem; padding: 0 0.7rem; border-radius: 50%; cursor: pointer; z-index: 2; }
    .slider-btn.left { left: 10px; }
    .slider-btn.right { right: 10px; }
    .slider-dots { position: absolute; bottom: 18px; left: 50%; transform: translateX(-50%); display: flex; gap: 8px; }
    .slider-dot { width: 12px; height: 12px; border-radius: 50%; background: #fff; opacity: 0.5; cursor: pointer; border: 2px solid #1abc9c; }
    .slider-dot.active { opacity: 1; background: #1abc9c; }
    .section { max-width: 1100px; margin: 2rem auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); padding: 2rem; }
    .section-title { font-size: 1.4rem; font-weight: bold; margin-bottom: 1.2rem; color: #1abc9c; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; }
    .card { background: #f9f9f9; border-radius: 8px; padding: 1rem; box-shadow: 0 1px 4px rgba(0,0,0,0.03); }
    .card img { width: 100%; border-radius: 6px; margin-bottom: 0.5rem; }
    .card h3 { margin: 0.5rem 0 0.2rem; font-size: 1.1rem; }
    .card p { font-size: 0.95rem; color: #555; }
    .btn-login { margin-left: 2rem; }
    footer { background: #222; color: #fff; text-align: center; padding: 1.2rem 0; margin-top: 2rem; }
    /* Popup */
    .popup-bg {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .popup-bg.active {
      display: flex;
      opacity: 1;
      pointer-events: auto;
    }
    .popup.shake {
      animation: shake 0.3s;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      10% { transform: translateX(-12px); }
      20% { transform: translateX(12px); }
      30% { transform: translateX(-10px); }
      40% { transform: translateX(10px); }
      50% { transform: translateX(-8px); }
      60% { transform: translateX(8px); }
      70% { transform: translateX(-6px); }
      80% { transform: translateX(6px); }
      90% { transform: translateX(-4px); }
      100% { transform: translateX(0); }
    }
    @keyframes spin { 100% { transform: rotate(360deg); } }
    .popup { background: #fff; border-radius: 12px; padding: 2rem; min-width: 320px; box-shadow: 0 2px 16px rgba(0,0,0,0.15); position: relative; }
    .popup-close { position: absolute; top: 10px; right: 16px; font-size: 1.5rem; color: #1abc9c; cursor: pointer; }
    .popup h2 { color: #1abc9c; margin-bottom: 1rem; }
    .popup input { width: 100%; padding: 0.5rem; margin-bottom: 1rem; border-radius: 6px; border: 1px solid #ccc; }
    .popup .btn-main { width: 100%; }
    @media (max-width: 600px) {
      .section { padding: 1rem; }
      .slider, .slides, .slide { height: 180px; min-height: 180px; }
      .banner h1 { font-size: 1.2rem; }
    }
    .main-social-login {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-bottom: 1rem;
    }
    .main-social-login .btn-social {
      flex: 1 1 0;
      font-size: 1.08rem;
      font-weight: bold;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      transition: background 0.2s, box-shadow 0.2s;
    }
    .btn-social.fb { background: #1877f2; color: #fff; }
    .btn-social.fb:hover { background: #145db2; }
    .btn-social.insta { background: linear-gradient(45deg,#f9ce34,#ee2a7b,#6228d7); color: #fff; }
    .btn-social.insta:hover { filter: brightness(0.95); }
    .btn-social.gmail { background: #ea4335; color: #fff; }
    .btn-social.gmail:hover { background: #b92d1f; }
    .btn-social img { width: 22px; height: 22px; }
    .other-social-login {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 1rem;
    }
    .other-social-login .btn-social {
      font-size: 0.98rem;
      padding: 0.4rem 1rem;
      border-radius: 6px;
      background: #f5f5f5;
      color: #333;
      font-weight: 500;
    }
    .btn-social.yahoo { background: #6001d2; color: #fff; }
    .btn-social.yahoo:hover { background: #43008f; }
    .btn-social.hotmail { background: #0072c6; color: #fff; }
    .btn-social.hotmail:hover { background: #005a9e; }
    #sidebar-container {
      position: fixed;
      left: 0; top: 0;
      height: 100vh;
      z-index: 100;
    }
    #main-content {
      margin-left: 270px;
      padding: 2rem 2rem 2rem 2rem;
      min-height: 100vh;
      background: #f7f8fa !important;
    }
    @media (max-width: 900px) {
      #main-content { margin-left: 0; }
      #sidebar-container { position: static; width: 100vw; }
    }
    .sidebar-toggle-btn {
      display: none;
      position: fixed;
      top: 18px;
      left: 18px;
      z-index: 200;
      background: #23235b;
      color: #ffc107;
      border: none;
      font-size: 2rem;
      border-radius: 8px;
      padding: 6px 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      cursor: pointer;
    }
    @media (max-width: 900px) {
      .sidebar-toggle-btn { display: block; }
      #sidebar-container {
        position: fixed;
        left: -270px;
        top: 0;
        width: 270px;
        height: 100vh;
        background: transparent;
        transition: left 0.35s cubic-bezier(.4,0,.2,1);
        z-index: 300;
      }
      #sidebar-container.active {
        left: 0;
        background: rgba(0,0,0,0.18);
      }
      #main-content { margin-left: 0; }
      body.sidebar-open {
        overflow: hidden;
      }
    }
  </style>
</head>
<body style="margin:0;">
  <button id="sidebar-toggle" class="sidebar-toggle-btn" aria-label="Mở menu">&#9776;</button>
  <div id="sidebar-container"></div>
  <div id="main-content">
    <header>
      <div class="logo"><img src="assets/images/logo-voteweb.png" alt="VOTEWEB">VOTE<span style="color:#333;">WEB</span></div>
    </header>

    <!-- Slider Banner -->
    <div class="slider" id="main-slider">
      <button class="slider-btn left" onclick="moveSlide(-1)">&#8592;</button>
      <div class="slides">
        <div class="slide" style="background-image:url('assets/images/banner1.jpg')">Tham gia cuộc thi lớn nhất năm!</div>
        <div class="slide" style="background-image:url('assets/images/banner2.jpg')">Bình chọn thí sinh bạn yêu thích!</div>
        <div class="slide" style="background-image:url('assets/images/banner3.jpg')">Nhận quà hấp dẫn khi tham gia!</div>
      </div>
      <button class="slider-btn right" onclick="moveSlide(1)">&#8594;</button>
      <div class="slider-dots" id="slider-dots"></div>
    </div>

    <div class="section">
      <div class="section-title">Cuộc thi nổi bật</div>
      <div class="grid" id="featured-contests">
        <!-- JS fetch API sẽ render các cuộc thi nổi bật ở đây -->
      </div>
    </div>

    <div class="section">
      <div class="section-title">Thí sinh hot</div>
      <div class="grid" id="hot-contestants">
        <!-- JS fetch API sẽ render thí sinh hot ở đây -->
      </div>
    </div>

    <div class="section">
      <div class="section-title">Tin tức mới nhất</div>
      <div class="grid" id="latest-news">
        <!-- JS fetch API sẽ render tin tức ở đây -->
      </div>
    </div>

    <footer>
      &copy; 2024 VOTEWEB. All rights reserved.
    </footer>

    <!-- Popup đăng nhập demo -->
    <div class="popup-bg" id="login-popup-bg">
      <div class="popup">
        <span class="popup-close" onclick="closeLoginPopup()">&times;</span>
        <h2>Đăng nhập</h2>
        <div class="main-social-login">
          <button class="btn-social fb"><img src="assets/images/facebook.svg" alt="Facebook"> Facebook</button>
          <button class="btn-social insta"><img src="assets/images/instagram.svg" alt="Instagram"> Instagram</button>
          <button class="btn-social gmail"><img src="assets/images/gmail.svg" alt="Gmail"> Email</button>
        </div>
        <div style="text-align:center; margin: 1rem 0 0.5rem; color:#888;">Hoặc đăng nhập bằng</div>
        <div class="other-social-login">
          <button class="btn-social yahoo"><img src="assets/images/yahoo.svg" alt="Yahoo"> Yahoo</button>
          <button class="btn-social hotmail"><img src="assets/images/hotmail.svg" alt="Hotmail"> Hotmail</button>
        </div>
        <div style="margin:1.2rem 0 0.5rem; text-align:center; color:#888;">Hoặc đăng nhập truyền thống</div>
        <input type="text" placeholder="Tên đăng nhập hoặc Email">
        <input type="password" placeholder="Mật khẩu">
        <button class="btn-main" style="margin-bottom:1rem;" onclick="validateLogin()">Đăng nhập</button>
      </div>
    </div>

    <div id="toast" style="position:fixed;top:30px;right:30px;z-index:2000;display:none;min-width:200px;padding:12px 24px;border-radius:8px;font-weight:bold;"></div>
  </div>
  <script>
    // Slider logic
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const dotsContainer = document.getElementById('slider-dots');
    function showSlide(idx) {
      if (idx < 0) idx = slides.length - 1;
      if (idx >= slides.length) idx = 0;
      document.querySelector('.slides').style.transform = `translateX(-${idx * 100}%)`;
      currentSlide = idx;
      updateDots();
    }
    function moveSlide(step) { showSlide(currentSlide + step); }
    function updateDots() {
      dotsContainer.innerHTML = '';
      for (let i = 0; i < slides.length; i++) {
        const dot = document.createElement('div');
        dot.className = 'slider-dot' + (i === currentSlide ? ' active' : '');
        dot.onclick = () => showSlide(i);
        dotsContainer.appendChild(dot);
      }
    }
    showSlide(0);

    // Popup login
    function showLoginPopup() {
      document.getElementById('login-popup-bg').classList.add('active');
    }
    function closeLoginPopup() {
      document.getElementById('login-popup-bg').classList.remove('active');
    }

    // Xác thực nâng cao cho form đăng nhập
    function validateLogin() {
      const popup = document.querySelector('.popup');
      const usernameInput = popup.querySelector('input[type=text]');
      const passwordInput = popup.querySelector('input[type=password]');
      const username = usernameInput.value.trim();
      const password = passwordInput.value.trim();

      // Reset border
      usernameInput.style.borderColor = '#ccc';
      passwordInput.style.borderColor = '#ccc';

      // Kiểm tra rỗng
      if (!username) {
        showToast('Vui lòng nhập tên đăng nhập hoặc email!');
        usernameInput.style.borderColor = '#e74c3c';
        shakePopup();
        return false;
      }
      // Kiểm tra độ dài tối đa
      if (username.length > 50) {
        showToast('Tên đăng nhập/email không được vượt quá 50 ký tự!');
        usernameInput.style.borderColor = '#e74c3c';
        shakePopup();
        return false;
      }
      // Kiểm tra email hợp lệ nếu có ký tự @
      if (username.includes('@') && !/^[\w-.]+@[\w-]+\.[a-z]{2,}$/i.test(username)) {
        showToast('Email không hợp lệ!');
        usernameInput.style.borderColor = '#e74c3c';
        shakePopup();
        return false;
      }
      if (!password) {
        showToast('Vui lòng nhập mật khẩu!');
        passwordInput.style.borderColor = '#e74c3c';
        shakePopup();
        return false;
      }
      if (password.length < 6) {
        showToast('Mật khẩu phải từ 6 ký tự!');
        passwordInput.style.borderColor = '#e74c3c';
        shakePopup();
        return false;
      }
      if (password.length > 32) {
        showToast('Mật khẩu không được vượt quá 32 ký tự!');
        passwordInput.style.borderColor = '#e74c3c';
        shakePopup();
        return false;
      }
      if (!/[A-Z]/.test(password) || !/[0-9]/.test(password)) {
        showToast('Mật khẩu phải có ít nhất 1 chữ hoa và 1 số!');
        passwordInput.style.borderColor = '#e74c3c';
        shakePopup();
        return false;
      }
      if (!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
        showToast('Mật khẩu phải có ít nhất 1 ký tự đặc biệt!');
        passwordInput.style.borderColor = '#e74c3c';
        shakePopup();
        return false;
      }
      // Loading hiệu ứng
      showToast('Đang xác thực...', 'loading');
      loginAPI(username, password);
      return false;
    }
    function shakePopup() {
      const popup = document.querySelector('.popup');
      popup.classList.add('shake');
      setTimeout(() => popup.classList.remove('shake'), 600);
    }
    // Kết nối API thực tế
    function loginAPI(username, password) {
      fetch('https://your-backend-api.com/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      })
      .then(res => res.json())
      .then(data => {
        if (data.success) {
          showToast('Đăng nhập thành công!', 'success');
          setTimeout(() => {
            closeLoginPopup();
            window.location.href = 'dashboard.html'; // hoặc trang bạn muốn chuyển hướng
          }, 1200);
        } else {
          showToast(data.message || 'Đăng nhập thất bại!');
          shakePopup();
        }
      })
      .catch(() => {
        showToast('Lỗi kết nối máy chủ!');
        shakePopup();
      });
    }
    // Popup thông báo (toast) nâng cao
    function showToast(msg, type='error') {
      const toast = document.getElementById('toast');
      if (type === 'success') {
        toast.innerHTML = '<span style="font-size:1.3em;vertical-align:middle;">✔️</span> ' + msg;
        toast.style.background = '#1abc9c';
      } else if (type === 'loading') {
        toast.innerHTML = '<span class="spinner" style="margin-right:8px;display:inline-block;width:18px;height:18px;border:2px solid #fff;border-top:2px solid #3498db;border-radius:50%;animation:spin 1s linear infinite;vertical-align:middle;"></span>' + msg;
        toast.style.background = '#3498db';
      } else {
        toast.innerHTML = msg;
        toast.style.background = '#e74c3c';
      }
      toast.style.color = '#fff';
      toast.style.display = 'block';
      toast.style.opacity = 1;
      setTimeout(() => {
        if (type !== 'loading') {
          toast.style.opacity = 0;
          setTimeout(() => toast.style.display = 'none', 400);
        }
      }, type === 'loading' ? 999999 : 2000);
    }

    // Xác thực cho các nút mạng xã hội
    function socialLogin(provider) {
      showToast('Đang chuyển hướng đến ' + provider + '...', 'loading');
      setTimeout(() => {
        // Demo: thành công
        showToast('Đăng nhập ' + provider + ' thành công!', 'success');
        setTimeout(() => {
          closeLoginPopup();
          window.location.href = 'dashboard.html';
        }, 1200);
      }, 1500);
      // Thực tế: window.location.href = 'https://...';
    }
    document.querySelector('.btn-social.fb').onclick = function() { socialLogin('Facebook'); };
    document.querySelector('.btn-social.insta').onclick = function() { socialLogin('Instagram'); };
    document.querySelector('.btn-social.gmail').onclick = function() { socialLogin('Email'); };
    document.querySelector('.btn-social.yahoo').onclick = function() { socialLogin('Yahoo'); };
    document.querySelector('.btn-social.hotmail').onclick = function() { socialLogin('Hotmail'); };

    // Fetch API demo (thay URL API thật của bạn)
    fetch('https://api.example.com/contests/featured')
      .then(res => res.json())
      .then(data => {
        const grid = document.getElementById('featured-contests');
        data.forEach(item => {
          const div = document.createElement('div');
          div.className = 'card';
          div.innerHTML = `<img src="${item.image}" alt="${item.title}"><h3>${item.title}</h3><p>${item.description}</p>`;
          grid.appendChild(div);
        });
      });
    fetch('https://api.example.com/contestants/hot')
      .then(res => res.json())
      .then(data => {
        const grid = document.getElementById('hot-contestants');
        data.forEach(item => {
          const div = document.createElement('div');
          div.className = 'card';
          div.innerHTML = `<img src="${item.avatar}" alt="${item.name}"><h3>${item.name}</h3><p>${item.intro}</p>`;
          grid.appendChild(div);
        });
      });
    fetch('https://api.example.com/news/latest')
      .then(res => res.json())
      .then(data => {
        const grid = document.getElementById('latest-news');
        data.forEach(item => {
          const div = document.createElement('div');
          div.className = 'card';
          div.innerHTML = `<h3>${item.title}</h3><p>${item.summary}</p>`;
          grid.appendChild(div);
        });
      });

    fetch('sidebar.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('sidebar-container').innerHTML = html;
      });
    document.getElementById('sidebar-toggle').onclick = function() {
      document.getElementById('sidebar-container').classList.add('active');
      document.body.classList.add('sidebar-open');
    };
    document.addEventListener('click', function(e) {
      if (
        window.innerWidth <= 900 &&
        document.getElementById('sidebar-container').classList.contains('active') &&
        !document.getElementById('sidebar-container').contains(e.target) &&
        e.target.id !== 'sidebar-toggle'
      ) {
        document.getElementById('sidebar-container').classList.remove('active');
        document.body.classList.remove('sidebar-open');
      }
    });
  </script>
</body>
</html>